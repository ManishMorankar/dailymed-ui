<div class="page-title col-md-12 ">
  <h1> User master</h1>
  <div class="breadcrumbs">
    <a href="#">Home</a>/<span>User master</span>
  </div>
</div>
<div class="content">
  <div>
    <a class="btn btn-primary float-right" (click)="addInd = !addInd" *ngIf="!addInd">
      <i class="material-icons pointer">add_circle</i> Add
    </a>
    <a class="btn btn-primary float-right" (click)="addInd = !addInd" *ngIf="addInd">
      <i class="material-icons pointer">remove_circle</i> Hide
    </a>
  </div>
  <div class="card" *ngIf="addInd  || updateInd">
    <div class="card-header-info">
      <h4 class="card-title no-hover-effect">Add User master </h4>
    </div>
    <div class="card-body">

      <form [formGroup]="UsersForm" (ngSubmit)="onSubmit()" class="w-100">
        <div class="row">
          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">User Name </label>
              <div class="col-sm-7">
                <input type="text" name="UserName" id="UserName" class="custom-input" formControlName="UserName"
                       placeholder="">
                <div class="error"
                     *ngIf="UsersForm.controls['UserName'].hasError('required') && UsersForm.controls['UserName'].touched">
                  User Name
                  is
                  required.
                </div>
              </div>
            </div>

          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">Employee Code </label>
              <div class="col-sm-7">
                <input type="text" name="EmployeeCode" id="EmployeeCode" class="custom-input" formControlName="EmployeeCode"
                       placeholder="">
                <div class="error"
                     *ngIf="UsersForm.controls['EmployeeCode'].hasError('required') && UsersForm.controls['EmployeeCode'].touched">
                  Employee Code
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">User Type </label>
              <div class="col-sm-7">
                <select class="custom-select" formControlName="UserType" name="UserType" id="UserType">
                  <option value="Internal">Internal</option>
                  <option value="External">External</option>
                </select>
                <div class="error"
                     *ngIf="UsersForm.controls['UserType'].hasError('required') && UsersForm.controls['UserType'].touched">
                  User Type
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">Organization Code </label>
              <div class="col-sm-7">
                <select class="custom-select" formControlName="OrganizationId" name="OrganizationId" id="OrganizationId">
                  <option *ngFor="let st of dropdowns.Organization" value="{{st.organizationId}}">
                    {{st.organizationCode}}
                  </option>
                </select>
                <div class="error"
                     *ngIf="UsersForm.controls['OrganizationId'].hasError('required') && UsersForm.controls['OrganizationId'].touched">
                  Organization Code
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">Department Code </label>
              <div class="col-sm-7">
                <select class="custom-select" formControlName="DepartmentId" name="DepartmentId" id="DepartmentId">
                  <option *ngFor="let st of dropdowns.Department" value="{{st.departmentId}}">
                    {{st.departmentCode}}
                  </option>
                </select>
                <div class="error"
                     *ngIf="UsersForm.controls['DepartmentId'].hasError('required') && UsersForm.controls['DepartmentId'].touched">
                  Department Code
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">Designation Code </label>
              <div class="col-sm-7">
                <select class="custom-select" formControlName="DesignationCodeId" name="DesignationCodeId" id="DesignationCodeId">
                  <option *ngFor="let st of dropdowns.Designation" value="{{st.designationCodeId}}">
                    {{st.designationCode}}
                  </option>
                </select>
                <div class="error"
                     *ngIf="UsersForm.controls['DesignationCodeId'].hasError('required') && UsersForm.controls['DesignationCodeId'].touched">
                  Designation Code
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">Grade Code </label>
              <div class="col-sm-7">
                <select class="custom-select" formControlName="GradeCodeId" name="GradeCodeId" id="GradeCodeId">
                  <option *ngFor="let st of dropdowns.Grade" value="{{st.gradeCodeId}}">
                    {{st.gradeCode}}
                  </option>
                </select>
                <div class="error"
                     *ngIf="UsersForm.controls['GradeCodeId'].hasError('required') && UsersForm.controls['GradeCodeId'].touched">
                  Grade Code
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">Discipline Code </label>
              <div class="col-sm-7">
                <select class="custom-select" formControlName="DisciplineCodeId" name="DisciplineCodeId" id="DisciplineCodeId">
                  <option *ngFor="let st of dropdowns.Discipline" value="{{st.disciplineCodeId}}">
                    {{st.disciplineCode}}
                  </option>
                </select>
                <div class="error"
                     *ngIf="UsersForm.controls['DisciplineCodeId'].hasError('required') && UsersForm.controls['DisciplineCodeId'].touched">
                  Grade Code
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">Location Code </label>
              <div class="col-sm-7">
                <select class="custom-select" formControlName="LocationId" name="LocationId" id="LocationId">
                  <option *ngFor="let st of dropdowns.Location" value="{{st.locationId}}">
                    {{st.locationCode}}
                  </option>
                </select>
                <div class="error"
                     *ngIf="UsersForm.controls['LocationId'].hasError('required') && UsersForm.controls['LocationId'].touched">
                  Location Code
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">Role Code </label>
              <div class="col-sm-7">
                <select class="custom-select" formControlName="RoleCodeId" name="RoleCodeId" id="RoleCodeId">
                  <option *ngFor="let st of dropdowns.RolesRights" value="{{st.roleId}}">
                    {{st.roleCode}}
                  </option>
                </select>
                <div class="error"
                     *ngIf="UsersForm.controls['RoleCodeId'].hasError('required') && UsersForm.controls['RoleCodeId'].touched">
                  Role Code
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">Gender </label>
              <div class="col-sm-7">
                <select class="custom-select" formControlName="Gender" name="Gender" id="Gender">
                  <option value="Male">Male</option>
                  <option value="Female">Female</option>
                  <option value="Other">Other</option>
                </select>
                <div class="error"
                     *ngIf="UsersForm.controls['Gender'].hasError('required') && UsersForm.controls['Gender'].touched">
                  Gender
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">Email Id </label>
              <div class="col-sm-7">
                <input type="text" name="EmailId" id="EmailId" class="custom-input" formControlName="EmailId"
                       placeholder="">
                <div class="error"
                     *ngIf="UsersForm.controls['EmailId'].hasError('required') && UsersForm.controls['EmailId'].touched">
                  Email Id
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">User Id </label>
              <div class="col-sm-7">
                <input type="text" name="UserId" id="UserId" class="custom-input" formControlName="UserId"
                       placeholder="">
                <div class="error"
                     *ngIf="UsersForm.controls['UserId'].hasError('required') && UsersForm.controls['UserId'].touched">
                  User Id
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">Password </label>
              <div class="col-sm-7">
                <input type="password" name="Password" id="UserId" class="custom-input" formControlName="Password"
                       placeholder="">
                <div class="error"
                     *ngIf="UsersForm.controls['Password'].hasError('required') && UsersForm.controls['Password'].touched">
                  Password
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">Joining Date </label>
              <div class="col-sm-7">
                <input type="date" name="JoiningDate" id="JoiningDate" class="custom-input" formControlName="JoiningDate"
                       placeholder="" >
                <div class="error"
                     *ngIf="UsersForm.controls['JoiningDate'].hasError('required') && UsersForm.controls['JoiningDate'].touched">
                  Joining Date
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">Date of Leaving </label>
              <div class="col-sm-7">
                <input type="date" name="LeavingDate" id="LeavingDate" class="custom-input" formControlName="LeavingDate"
                       placeholder="">
                
              </div>
            </div>
          </div>

          <div class="form-group col-md-4">
            <div class="row">
              <label class="col-sm-5">WEF Start Date </label>
              <div class="col-sm-7">
                <input type="date" name="StartDate" id="StartDate" class="custom-input" formControlName="StartDate"
                       placeholder="">
                <div class="error"
                     *ngIf="UsersForm.controls['StartDate'].hasError('required') && UsersForm.controls['StartDate'].touched">
                  WEF Start Date
                  is
                  required.
                </div>
              </div>
            </div>
          </div>

          <div class="col-md-12 text-right">
            <button type="submit" class="btn btn-primary" *ngIf="add">
              <i class="fas fa-plus"></i> Add User master
            </button>
            <button type="submit" class="btn btn-primary" *ngIf="update">
              <i class="fas fa-plus"></i> Update User Master
            </button>
          </div>

        </div>
      </form>


    </div>
  </div>
  <div class="card">
    <div class="card-header-info">
      <h4 class="card-title no-hover-effect">User master</h4>
    </div>
    <div class="card-body">
      <div class="row">
        <div class="col-md-12">
          <div class="float-right">
            <button class="btn btn-primary" (click)="filter = !filter">
              <i class="material-icons">filter_list</i>
              Filter
            </button>
          </div>
          <div class="form-group  col-sm-3 input-group  float-right pr-0 mr-2">
            <input class="custom-input" type="text" id="searchTextId" [(ngModel)]="searchText"
                   (keyup)="applyFilter($event)" name="searchText" placeholder="Search">
            <span class="input-group-icon">
              <i class="fas fa-search"></i>
            </span>
          </div>
        </div>
      </div>
      <ng-container *ngIf="filter">
        <div class="gray-bg row">
          <div class="col-md-12 pt-3 pb-3 gray-bg">
            <div class="row filter-row">
              <div class="form-group col-md-3">
                <label class="bmd-label-floating">User master</label>
                <input type="text" class="custom-input" [(ngModel)]="selectedUsers"
                       (change)="onChangeFilter()">
              </div>
            </div>
          </div>
        </div>
      </ng-container>
      <table mat-table [dataSource]="UsersDataSource" matSort class="my-table mt-3" style="width: 100%">
        <ng-container matColumnDef="selected">
          <th class="mat-column-width" mat-header-cell *matHeaderCellDef mat-sort-header> Select </th>
          <td mat-cell *matCellDef="let element">
            <section class="checkbox-section">
              <mat-checkbox [(ngModel)]="element.selected" (change)="onSelectionChange()">
              </mat-checkbox>
            </section>
          </td>
        </ng-container>

        <ng-container matColumnDef="userName">
          <th class="mat-column-width" mat-header-cell *matHeaderCellDef mat-sort-header> User Name </th>
          <td data-td-head=" User Name" mat-cell *matCellDef="let element">
            {{element.userName}}
          </td>
        </ng-container>

        <ng-container matColumnDef="employeeCode">
          <th class="mat-column-width" mat-header-cell *matHeaderCellDef mat-sort-header> Employee Code </th>
          <td data-td-head=" Employee Code" mat-cell *matCellDef="let element">
            {{element.employeeCode}}
          </td>
        </ng-container>

        <ng-container matColumnDef="userType">
          <th class="mat-column-width" mat-header-cell *matHeaderCellDef mat-sort-header> User Type </th>
          <td data-td-head=" User Type" mat-cell *matCellDef="let element">
            {{element.userType}}
          </td>
        </ng-container>


        <tr mat-header-row *matHeaderRowDef="UsersCols"></tr>
        <tr mat-row *matRowDef="let row; columns UsersCols;" (click)="rowClick(row)" class="pointer table-content"></tr>
      </table>



      <mat-paginator [pageSize]="pageSize" [pageSizeOptions]="pageSizeOptions">
      </mat-paginator>

      <div>


      </div>
      <div>
        <button class="btn btn-danger" (click)="deleteSelected()" [disabled]="!checkSelected()">
          <i class="material-icons">clear</i>Delete ({{getNumberSelected()}})
          Selected
        </button>

      </div>
    </div>
  </div>


